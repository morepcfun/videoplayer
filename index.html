<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chromebook Video Player</title>
<meta name="description" content="Online Video Player designed for Chromebooks with up 400% Volume Boost and support for .srt Subtitle Files.">
<meta name="author" content="Johnny Heggelund">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://morepcfun.github.io/videoplayer/">
<link rel="icon" href="data:image/png;base64,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">
<style>
:root {
--subtitle-font-size: 2.5vh;
}
body {
margin: 0;
background-color: #0d0d0d;
font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
overflow: hidden;
color: #f0f0f0;
}
#video-player {
width: 100vw;
height: 100vh;
object-fit: contain;
position: absolute;
top: 0;
left: 0;
z-index: 1;
background-color: #000;
cursor: pointer;
}
.controls-container {
position: fixed;
bottom: 0;
left: 0;
width: 100%;
z-index: 10;
display: flex;
flex-direction: column;
align-items: center;
padding: 0 1rem 1rem 1rem;
box-sizing: border-box;
transition: opacity 0.4s ease-in-out, visibility 0.4s;
background: linear-gradient(to top, rgba(0, 0, 0, 0.7), transparent);
}
.controls-container.hidden {
opacity: 0;
visibility: hidden;
pointer-events: none;
}
.controls-panel {
display: flex;
flex-direction: row;
align-items: center;
gap: 10px;
width: auto;
background-color: rgba(30, 30, 30, 0.85);
padding: 1rem 1.5rem;
border-radius: 12px;
backdrop-filter: blur(8px);
box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}
.btn {
font-weight: bold;
cursor: pointer;
color: white;
padding: 12px 18px;
border: none;
border-radius: 6px;
text-align: center;
transition: background-color 0.2s ease, transform 0.1s ease;
user-select: none;
}
.btn:hover {
filter: brightness(1.1);
}
.btn:active {
transform: scale(0.98);
}
::cue {
font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
font-size: var(--subtitle-font-size);
color: #ffffff;
background-color: transparent;
text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.9);
}
.main-label {
background-color: #007bff;
}
#help-btn {
background-color: #4a4a4a;
width: 45px;
height: 45px;
padding: 0;
font-size: 1.2rem;
}
#toggle-subs-btn, #filter-sdh-btn, #fullscreen-btn {
background-color: #4a4a4a;
width: 45px;
height: 45px;
padding: 0;
font-size: 1.5rem;
line-height: 45px;
}
#decrease-subs-size-btn, #increase-subs-size-btn {
background-color: #4a4a4a;
width: 45px;
height: 45px;
padding: 0;
font-size: 1.8rem;
line-height: 45px;
}
#toggle-subs-btn.active, #filter-sdh-btn.active {
background-color: #007bff;
}
input[type="file"] {
display: none;
}
.volume-controls {
display: flex;
align-items: center;
gap: 10px;
}
.volume-controls label {
font-size: 1.5rem;
font-weight: normal;
cursor: default;
color: #fff;
}
#volume-level {
font-weight: bold;
color: #00e0ff;
margin-left: 8px;
min-width: 50px;
text-align: left;
}
.volume-slider {
width: 100px;
}
.progress-bar-container {
width: 100%;
max-width: 900px;
height: 8px;
background-color: rgba(255, 255, 255, 0.3);
border-radius: 4px;
cursor: pointer;
margin-bottom: 15px;
position: relative;
}
.progress-bar-fill {
height: 100%;
width: 0;
background-color: #00aaff;
border-radius: 4px;
}
.loop-marker {
position: absolute;
top: -3px;
width: 4px;
height: 14px;
background-color: #00e0ff;
border-radius: 2px;
transform: translateX(-50%);
display: none;
}
#toast-notification {
position: fixed;
bottom: 120px;
left: 50%;
transform: translateX(-50%);
background-color: rgba(0, 255, 255, 0.85);
color: #000;
padding: 10px 20px;
border-radius: 20px;
z-index: 100;
font-weight: bold;
opacity: 0;
visibility: hidden;
transition: opacity 0.4s, transform 0.4s, visibility 0.4s;
pointer-events: none;
}
#toast-notification.show {
opacity: 1;
visibility: visible;
transform: translateX(-50%) translateY(-15px);
}
.modal-overlay {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: rgba(0, 0, 0, 0.7);
display: none;
justify-content: center;
align-items: center;
z-index: 1000;
backdrop-filter: blur(5px);
}
.modal-box {
background-color: #1e1e1e;
padding: 25px 35px;
border-radius: 12px;
border: 1px solid #00aaff;
box-shadow: 0 5px 25px rgba(0, 170, 255, 0.2);
width: 90%;
max-width: 570px;
}
.modal-box h2, h1 {
margin-top: 0;
color: #00aaff;
text-align: center;
}
.modal-box ul {
list-style: none;
padding: 0;
margin: 20px 0;
}
.modal-box li {
display: flex;
justify-content: space-between;
align-items: center;
padding: 8px 0;
border-bottom: 1px solid #333;
}
.modal-box li:last-child {
border-bottom: none;
}
.modal-box span {
background-color: #333;
padding: 2px 8px;
border-radius: 4px;
font-weight: bold;
color: #00e0ff;
}
#close-modal-btn {
display: block;
width: 100%;
padding: 12px;
margin-top: 20px;
background-color: #007bff;
font-size: 16px;
}
p {
font-size: 1rem;
}
</style>
</head>
<body>
<video id="video-player" crossorigin="anonymous" autoplay>
<track kind="subtitles" srclang="en" label="Subtitles" default>
</video>
<div class="controls-container">
<div class="progress-bar-container" id="progress-bar-container">
<div class="progress-bar-fill" id="progress-bar-fill"></div>
<div class="loop-marker" id="loop-start-marker"></div>
<div class="loop-marker" id="loop-end-marker"></div>
</div>
<div class="controls-panel">
<label for="file-upload" class="btn main-label" id="choose-files-btn"></label>
<input type="file" id="file-upload" accept=".mp4,.mkv,.srt" multiple>
<div class="volume-controls">
<label for="volume-booster">üîä<b id="volume-level">100%</b></label>
<input type="range" id="volume-booster" class="volume-slider" min="1" max="4" step="0.1" value="1" title="Volume Booster">
</div>
<button class="btn" id="fullscreen-btn" title="Toggle Fullscreen">‚õ∂</button>
<button class="btn" id="toggle-subs-btn" title="Toggle Subtitles">CC</button>
<button class="btn" id="decrease-subs-size-btn" title="Decrease Subtitle Size">-</button>
<button class="btn" id="increase-subs-size-btn" title="Increase Subtitle Size">+</button>
<button class="btn" id="filter-sdh-btn" title="Show Descriptions">üßè</button>
<button class="btn" id="help-btn">?</button>
</div>
</div>
<div id="toast-notification"></div>
<div id="shortcuts-modal" class="modal-overlay">
<div class="modal-box">
<h1>Chromebook üçø Video Player</h1>

<p>This browser-based video player was created to solve the common problem of low laptop volume, boosting audio up to 400%. It offers advanced subtitle control for .srt files, automatically filtering out descriptive text for the hearing-impaired, which can be toggled back on. You can easily resize subtitles with the + and - keys. The player also includes a precision loop function‚Äîsimply press L to set start and end points. Plus, it now remembers your playback position, so you can always pick up right where you left off. &copy; Johnny Heggelund</p>

<h2 id="shortcuts-title">Keyboard Shortcuts</h2>
<ul id="shortcuts-list">
<li>Play / Pause <span>Space</span></li>
<li>Toggle Fullscreen <span>F</span></li>
<li>Toggle Mute <span>M</span></li>
<li>Seek Forward 5s <span>‚Üí</span></li>
<li>Seek Backward 5s <span>‚Üê</span></li>
<li>Loop Control <span>L</span></li>
</ul>
<button id="close-modal-btn" class="btn">Close</button>
</div>
</div>
<script>

const lang = {
title: "Chromebook Video Player",
chooseFiles: "Open Files (.mp4, .mkv, .srt)",
subtitleLabel: "Subtitles",
noTrackError: "Could not find a text track on the video element.",
noVideoOnClipboard: "No video file found on the clipboard.",
loopStartSet: (time) => `üîÅ Loop start set to ${time}`,
loopingFromTo: (start, end) => `üîÅ Looping from ${start} to ${end}`,
invalidLoop: "‚ùå Invalid loop. Reset.",
loopRemoved: "‚úÖ Loop removed.",
resumingFrom: (time) => `Resuming from ${time}`
};

const videoPlayer = document.getElementById('video-player');
const fileUpload = document.getElementById('file-upload');
const volumeBooster = document.getElementById('volume-booster');
const volumeLevel = document.getElementById('volume-level');
const controlsContainer = document.querySelector('.controls-container');
const progressBarContainer = document.getElementById('progress-bar-container');
const progressBarFill = document.getElementById('progress-bar-fill');
const loopStartMarker = document.getElementById('loop-start-marker');
const loopEndMarker = document.getElementById('loop-end-marker');
const toast = document.getElementById('toast-notification');
const shortcutsModal = document.getElementById('shortcuts-modal');
const closeModalBtn = document.getElementById('close-modal-btn');
const helpBtn = document.getElementById('help-btn');
const toggleSubsBtn = document.getElementById('toggle-subs-btn');
const decreaseSubsSizeBtn = document.getElementById('decrease-subs-size-btn');
const increaseSubsSizeBtn = document.getElementById('increase-subs-size-btn');
const filterSdhBtn = document.getElementById('filter-sdh-btn');
const fullscreenBtn = document.getElementById('fullscreen-btn');

let inactivityTimeout;
let videoUrl = null;
let audioContext, gainNode;
let loopStart = null;
let loopEnd = null;
let currentSubtitleSize = 2.5;
let parsedSrtCues = [];
let hideSdhDescriptions = true;
let currentVideoIdentifier = null;
let saveInterval = null;

function updateStaticUIText() {
document.title = lang.title;
document.getElementById('choose-files-btn').textContent = lang.chooseFiles;
const trackElement = videoPlayer.querySelector('track');
if (trackElement) trackElement.label = lang.subtitleLabel;
}

function updateSubtitleSize() {
document.documentElement.style.setProperty('--subtitle-font-size', `${currentSubtitleSize}vh`);
}

function savePlaybackPosition() {
if (!currentVideoIdentifier || videoPlayer.currentTime === 0 || videoPlayer.ended) {
return;
}
try {
const positions = JSON.parse(localStorage.getItem('videoPlaybackPositions')) || {};
positions[currentVideoIdentifier] = videoPlayer.currentTime;
localStorage.setItem('videoPlaybackPositions', JSON.stringify(positions));
} catch (e) {
console.error("Could not save playback position:", e);
}
}

function loadPlaybackPosition() {
if (!currentVideoIdentifier) return;
try {
const positions = JSON.parse(localStorage.getItem('videoPlaybackPositions')) || {};
const savedTime = positions[currentVideoIdentifier];
if (savedTime && savedTime > 0 && savedTime < videoPlayer.duration) {
videoPlayer.currentTime = savedTime;
showToast(lang.resumingFrom(formatTime(savedTime)));
}
} catch (e) {
console.error("Could not load playback position:", e);
}
}

function handleFiles(files) {
if (!files || files.length === 0) return;

toggleSubsBtn.classList.remove('active');
filterSdhBtn.classList.remove('active');
hideSdhDescriptions = true;

clearInterval(saveInterval);
currentVideoIdentifier = null;

const filesArray = Array.from(files);
const videoFile = filesArray.find(f => f.name.toLowerCase().match(/\.(mp4|mkv)$/));
const srtFile = filesArray.find(f => f.name.toLowerCase().endsWith('.srt'));

if (videoFile) {
if (videoUrl) URL.revokeObjectURL(videoUrl);
videoUrl = URL.createObjectURL(videoFile);
videoPlayer.src = videoUrl;
videoPlayer.load();

currentVideoIdentifier = `${videoFile.name}-${videoFile.size}`;
saveInterval = setInterval(savePlaybackPosition, 5000);

const videoNameWithoutExt = videoFile.name.split('.').slice(0, -1).join('.');
const expectedSrtName = `${videoNameWithoutExt.toLowerCase()}.srt`;
const matchingSrtFile = filesArray.find(f => f.name.toLowerCase() === expectedSrtName);

if (matchingSrtFile) {
loadSrtFile(matchingSrtFile);
} else if (srtFile) {
loadSrtFile(srtFile);
}
} else if (srtFile) {
loadSrtFile(srtFile);
}
}

function loadSrtFile(file) {
const track = videoPlayer.textTracks[0];
if (!track) {
console.error(lang.noTrackError);
return;
}
track.mode = 'showing';
toggleSubsBtn.classList.add('active');

const reader = new FileReader();
reader.onload = (e) => {
parseSrtAndAddCues(e.target.result);
};
reader.readAsText(file, 'UTF-8');
}

function renderCues() {
const track = videoPlayer.textTracks[0];
if (!track) return;

while (track.cues && track.cues.length > 0) {
track.removeCue(track.cues[0]);
}

for (const cueData of parsedSrtCues) {
let cueText;
if (hideSdhDescriptions) {

cueText = cueData.text.replace(/\[.*?\]/g, '').replace(/\s{2,}/g, ' ').trim();
} else {

cueText = cueData.text;
}

if (cueText) {
const cue = new VTTCue(cueData.startTime, cueData.endTime, cueText);
track.addCue(cue);
}
}
}

function parseSrtAndAddCues(srtContent) {
parsedSrtCues = [];

const cleanContent = srtContent.replace(/\r\n|\r/g, '\n').replace(/^\uFEFF/, '');
const blocks = cleanContent.split('\n\n');

for (const block of blocks) {
const trimmedBlock = block.trim();
if (!trimmedBlock) continue;

const lines = trimmedBlock.split('\n');
if (lines.length < 2) continue;

const timestampLine = lines.find(line => line.includes('-->'));
if (!timestampLine) continue;

const timeMatch = timestampLine.match(/(\d{2}:\d{2}:\d{2}[,.]\d{3})\s*-->\s*(\d{2}:\d{2}:\d{2}[,.]\d{3})/);
if (!timeMatch) continue;

const startTime = timeStringToSeconds(timeMatch[1]);
const endTime = timeStringToSeconds(timeMatch[2]);
const cueText = lines.slice(lines.indexOf(timestampLine) + 1).join('\n');

if (!isNaN(startTime) && !isNaN(endTime) && cueText) {
parsedSrtCues.push({ startTime, endTime, text: cueText });
}
}
renderCues();
}

function timeStringToSeconds(timeString) {
const [hms, ms] = timeString.replace(',', '.').split('.');
const parts = hms.split(':');
if (parts.length !== 3) return NaN;
return parseInt(parts[0]) * 3600 + parseInt(parts[1]) * 60 + parseInt(parts[2]) + (parseInt(ms) / 1000);
}

function setupAudioBooster() {
if (audioContext) return;
try {
const AudioContext = window.AudioContext || window.webkitAudioContext;
audioContext = new AudioContext();
const source = audioContext.createMediaElementSource(videoPlayer);
gainNode = audioContext.createGain();
source.connect(gainNode);
gainNode.connect(audioContext.destination);
gainNode.gain.value = parseFloat(volumeBooster.value);
} catch (e) {
console.error("Could not create AudioContext:", e);
volumeBooster.disabled = true;
}
}

function showControls() {
controlsContainer.classList.remove('hidden');
videoPlayer.style.cursor = 'pointer';
clearTimeout(inactivityTimeout);
inactivityTimeout = setTimeout(hideControls, 3000);
}

function hideControls() {
if (!videoPlayer.paused && !controlsContainer.matches(':hover')) {
controlsContainer.classList.add('hidden');
videoPlayer.style.cursor = 'none';
}
}

function showToast(message) {
if (!toast) return;
toast.textContent = message;
toast.classList.add('show');
setTimeout(() => {
toast.classList.remove('show');
}, 2500);
}

function formatTime(seconds) {
if (isNaN(seconds)) return "00:00:00";
return new Date(seconds * 1000).toISOString().substr(11, 8);
}

function handleLoopKey() {
if (loopStart === null) {
loopStart = videoPlayer.currentTime;
showToast(lang.loopStartSet(formatTime(loopStart)));
} else if (loopEnd === null) {
loopEnd = videoPlayer.currentTime;
if (loopEnd <= loopStart) {
loopStart = null;
loopEnd = null;
showToast(lang.invalidLoop);
} else {
showToast(lang.loopingFromTo(formatTime(loopStart), formatTime(loopEnd)));
videoPlayer.currentTime = loopStart;
}
} else {
loopStart = null;
loopEnd = null;
showToast(lang.loopRemoved);
}
updateLoopMarkers();
}

function updateLoopMarkers() {
const duration = videoPlayer.duration;
if (loopStart !== null && duration > 0) {
loopStartMarker.style.left = `${(loopStart / duration) * 100}%`;
loopStartMarker.style.display = 'block';
} else {
loopStartMarker.style.display = 'none';
}
if (loopEnd !== null && duration > 0) {
loopEndMarker.style.left = `${(loopEnd / duration) * 100}%`;
loopEndMarker.style.display = 'block';
} else {
loopEndMarker.style.display = 'none';
}
}

function showShortcuts() {
shortcutsModal.style.display = 'flex';
}

function hideShortcuts() {
shortcutsModal.style.display = 'none';
}

fileUpload.addEventListener('change', (e) => {
handleFiles(e.target.files);
e.target.value = null;
});

document.body.addEventListener('dragover', (e) => e.preventDefault());
document.body.addEventListener('drop', (e) => {
e.preventDefault();
handleFiles(e.dataTransfer.files);
});

document.addEventListener('paste', (e) => {
e.preventDefault();
const items = e.clipboardData.items;
let fileFound = false;
for (const item of items) {
if (item.kind === 'file') {
const file = item.getAsFile();
if (file) {
handleFiles([file]);
fileFound = true;
break;
}
}
}
if (!fileFound) {
showToast(lang.noVideoOnClipboard);
}
});

volumeBooster.addEventListener('input', (e) => {
if (!gainNode) setupAudioBooster();
if (gainNode) {
const boostValue = parseFloat(e.target.value);
gainNode.gain.setValueAtTime(boostValue, audioContext.currentTime);
volumeLevel.textContent = `${Math.round(boostValue * 100)}%`;
}
});

fullscreenBtn.addEventListener('click', () => {
if (document.fullscreenElement) {
document.exitFullscreen();
} else {
document.documentElement.requestFullscreen();
}
});

document.addEventListener('fullscreenchange', () => {
fullscreenBtn.textContent = document.fullscreenElement ? '‚§°' : '‚õ∂';
});

toggleSubsBtn.addEventListener('click', () => {
const track = videoPlayer.textTracks[0];
if (!track || parsedSrtCues.length === 0) return;

const isShowing = track.mode === 'showing';
track.mode = isShowing ? 'hidden' : 'showing';
toggleSubsBtn.classList.toggle('active', !isShowing);
});

increaseSubsSizeBtn.addEventListener('click', () => {
currentSubtitleSize += 0.2;
updateSubtitleSize();
});

decreaseSubsSizeBtn.addEventListener('click', () => {
if (currentSubtitleSize > 1.0) {
currentSubtitleSize -= 0.2;
updateSubtitleSize();
}
});

filterSdhBtn.addEventListener('click', () => {
hideSdhDescriptions = !hideSdhDescriptions;

filterSdhBtn.classList.toggle('active', !hideSdhDescriptions);
renderCues();
});

videoPlayer.addEventListener('play', showControls);
videoPlayer.addEventListener('pause', showControls);
videoPlayer.addEventListener('mouseenter', showControls);
controlsContainer.addEventListener('mouseenter', showControls);
document.addEventListener('mousemove', showControls);
videoPlayer.addEventListener('click', () => videoPlayer.paused ? videoPlayer.play() : videoPlayer.pause());

videoPlayer.addEventListener('timeupdate', () => {
if (loopStart !== null && loopEnd !== null) {
if (videoPlayer.currentTime >= loopEnd || videoPlayer.currentTime < loopStart) {
videoPlayer.currentTime = loopStart;
}
}
if (videoPlayer.duration) {
const progress = (videoPlayer.currentTime / videoPlayer.duration) * 100;
progressBarFill.style.width = `${progress}%`;
}
});

videoPlayer.addEventListener('loadedmetadata', updateLoopMarkers);
videoPlayer.addEventListener('loadedmetadata', loadPlaybackPosition);

progressBarContainer.addEventListener('click', (e) => {
const rect = progressBarContainer.getBoundingClientRect();
const pos = (e.clientX - rect.left) / rect.width;
videoPlayer.currentTime = pos * videoPlayer.duration;
});

helpBtn.addEventListener('click', showShortcuts);
closeModalBtn.addEventListener('click', hideShortcuts);
shortcutsModal.addEventListener('click', (e) => {
if (e.target === shortcutsModal) hideShortcuts();
});

document.addEventListener('keydown', (e) => {
if (e.key === 'Escape') {
hideShortcuts();
}

if (shortcutsModal.style.display === 'flex' || e.target.tagName === 'INPUT' && e.target.type !== 'range') {
return;
}

if (document.activeElement === volumeBooster && (e.key === 'ArrowLeft' || e.key === 'ArrowRight')) {
return;
}

switch (e.key.toLowerCase()) {
case ' ':
if (document.activeElement.tagName !== 'BUTTON') {
e.preventDefault();
videoPlayer.paused ? videoPlayer.play() : videoPlayer.pause();
}
break;
case 'f':
document.fullscreenElement ? document.exitFullscreen() : document.documentElement.requestFullscreen();
break;
case 'm':
videoPlayer.muted = !videoPlayer.muted;
break;
case 'arrowright':
videoPlayer.currentTime += 5;
break;
case 'arrowleft':
videoPlayer.currentTime -= 5;
break;
case 'l':
handleLoopKey();
break;
}
});

updateStaticUIText();
updateSubtitleSize();
showControls();
hideShortcuts();
</script></body>
</html>